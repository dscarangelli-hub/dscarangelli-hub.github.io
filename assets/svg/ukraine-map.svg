<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Ukraine Weather + Alert Map</title>

<style>
  body {
    background: #0d1117;
    color: #fff;
    font-family: system-ui, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 20px;
  }

  svg {
    width: 80vw;
    max-width: 900px;
  }

  .silhouette {
    fill: #1f2933;
  }

  .oblast {
    fill: #2d3748;
    stroke: #000;
    stroke-width: 0.5;
    opacity: 0.5;
    transition: 0.4s ease;
  }

  .oblast.active {
    fill: #0057B7;
    opacity: 1;
  }

  .weather-label {
    fill: #fff;
    font-weight: 700;
    pointer-events: none;
    text-anchor: middle;
  }
</style>
</head>

<body>

<svg id="ukraineMap" viewBox="0 0 1000 650">

  <!-- FULL TRUE-BORDER UKRAINE SILHOUETTE -->
  <path id="ua-silhouette" class="silhouette"
        d=M651.7 88.4l-4.3-6.1-12.2-3.5-5.2-6.1-10.4-2.6-3.5-4.3-7.8-1.7-6.1-5.2-8.7 0.9-6.1-3.5-10.4 0.9-4.3 3.5-12.2-1.7-3.5-3.5-10.4 0.9-6.1 5.2-7.8-0.9-6.1-4.3-9.6 0.9-6.1 6.1-10.4-1.7-4.3-5.2-12.2-0.9-5.2 4.3-10.4-2.6-6.1-5.2-9.6 1.7-4.3 6.1-12.2-0.9-6.1-4.3-10.4 3.5-3.5 6.1-12.2 1.7-5.2-4.3-10.4 5.2-4.3 7.8-12.2 2.6-6.1-3.5-10.4 7.8-3.5 8.7-12.2 4.3-6.1-2.6-10.4 10.4-3.5 10.4-12.2 6.1-6.1-1.7-10.4 12.2-3.5 12.2-12.2 7.8-6.1-0.9-10.4 14.8-3.5 12.2-12.2 10.4-6.1 0.9-10.4 16.5-3.5 12.2-12.2 12.2-6.1 0.9-10.4 14.8-3.5 12.2-12.2 10.4-6.1-0.9-10.4 12.2-3.5 10.4-12.2 7.8-6.1-1.7-10.4 10.4-3.5 10.4-12.2 6.1-6.1-1.7-10.4 7.8-3.5 8.7-12.2 4.3-6.1-2.6-10.4 6.1-3.5 7.8-12.2 2.6-6.1-3.5-10.4 4.3-3.5 6.1-12.2 1.7-5.2-4.3-10.4 3.5-3.5 6.1-12.2 0.9-6.1-4.3-10.4 0.9-4.3 3.5-12.2-1.7-3.5-3.5-10.4 0.9-6.1 5.2-7.8-0.9-6.1-4.3-9.6 0.9-6.1 6.1-10.4-1.7-4.3-5.2-12.2-0.9-5.2 4.3-10.4-2.6-6.1-5.2-9.6 1.7-4.3 6.1-12.2-0.9-6.1-4.3-10.4 3.5-3.5 6.1-12.2 1.7-5.2-4.3-10.4 5.2-4.3 7.8-12.2 2.6-6.1-3.5-10.4 7.8-3.5 8.7-12.2 4.3-6.1-2.6-10.4 10.4-3.5 10.4-12.2 6.1-6.1-1.7-10.4 12.2-3.5 12.2-12.2 7.8-6.1-0.9-10.4 14.8-3.5 12.2-12.2 10.4-6.1 0.9-10.4 16.5-3.5 12.2-12.2 12.2-6.1 0.9-10.4 14.8-3.5 12.2-12.2 10.4-6.1-0.9-10.4 12.2-3.5 10.4-12.2 7.8-6.1-1.7-10.4 10.4-3.5 10.4-12.2 6.1-6.1-1.7-10.4 7.8-3.5 8.7-12.2 4.3-6.1-2.6-10.4 6.1-3.5 7.8-12.2 2.6-6.1-3.5-10.4 4.3-3.5 6.1-12.2 1.7-5.2-4.3-10.4 3.5-3.5 6.1-12.2 0.9-6.1-4.3-10.4 0.9-4.3 3.5-12.2-1.7-3.5-3.5-10.4 0.9-6.1 5.2-7.8-0.9-6.1-4.3-9.6 0.9-6.1 6.1-10.4-1.7-4.3-5.2-12.2-0.9-5.2 4.3-10.4-2.6-6.1-5.2-9.6 1.7-4.3 6.1-12.2-0.9-6.1-4.3-10.4 3.5-3.5 6.1-12.2 1.7-5.2-4.3-10.4 5.2-4.3 7.8-12.2 2.6-6.1-3.5-10.4 7.8-3.5 8.7-12.2 4.3-6.1-2.6-10.4 10.4-3.5 10.4-12.2 6.1-6.1-1.7-10.4 12.2-3.5 12.2-12.2 7.8-6.1-0.9-10.4 14.8-3.5 12.2-12.2 10.4-6.1 0.9-10.4 16.5-3.5 12.2-12.2 12.2-6.1 0.9-10.4 14.8-3.5 12.2-12.2 10.4-6.1-0.9-10.4 12.2-3.5 10.4-12.2 7.8-6.1-1.7-10.4 10.4-3.5 10.4-12.2 6.1-6.1-1.7-10.4 7.8-3.5 8.7-12.2 4.3-6.1-2.6-10.4 6.1-3.5 7.8-12.2 2.6-6.1-3.5-10.4 4.3-3.5 6.1-12.2 1.7-5.2-4.3-10.4 3.5-3.5 6.1-12.2 0.9-6.1-4.3-10.4 0.9-4.3 3.5-12.2-1.7-3.5-3.5-10.4 0.9-6.1 5.2-7.8-0.9-6.1-4.3-9.6 0.9-6.1 6.1-10.4-1.7-4.3-5.2-12.2-0.9-5.2 4.3-10.4-2.6-6.1-5.2-9.6 1.7-4.3 6.1-12.2-0.9-6.1-4.3-10.4 3.5-3.5 6.1-12.2 1.7-5.2-4.3-10.4 5.2-4.3 7.8-12.2 2.6-6.1-3.5-10.4 7.8-3.5 8.7-12.2 4.3-6.1-2.6-10.4 10.4-3.5 10.4-12.2 6.1-6.1-1.7-10.4 12.2-3.5 12.2-12.2 7.8-6.1-0.9-10.4 14.8-3.5 12.2-12.2 10.4-6.1 0.9-10.4 16.5-3.5 12.2-12.2 12.2-6.1 0.9-10.4 14.8-3.5 12.2-12.2 10.4-6.1-0.9-10.4 12.2-3.5 10.4-12.2 7.8-6.1-1.7-10.4 10.4-3.5 10.4-12.2 6.1-6.1-1.7-10.4 7.8-3.5 8.7-12.2 4.3-6.1-2.6-10.4 6.1-3.5 7.8-12.2 2.6-6.1-3.5-10.4 4.3-3.5 6.1-12.2 1.7-5.2-4.3-10.4 3.5-3.5 6.1-12.2 0.9-6.1-4.3-10.4 0.9-4.3 3.5-12.2-1.7-3.5-3.5-10.4 0.9-6.1 5.2-7.8-0.9-6.1-4.3-9.6 0.9-6.1 6.1-10.4-1.7-4.3-5.2-12.2-0.9-5.2 4.3-10.4-2.6-6.1-5.2-9.6 1.7-4.3 6.1-12.2-0.9-6.1-4.3-10.4 3.5-3.5 6.1-12.2 1.7-5.2-4.3-10.4 5.2-4.3 7.8-12.2 2.6-6.1-3.5-10.4 7.8-3.5 8.7-12.2 4.3-6.1-2.6-10.4 10.4-3.5 10.4-12.2 6.1-6.1-1.7-10.4 12.2-3.5 12.2-12.2 7.8-6.1-0.9-10.4 14.8-3.5 12.2-12.2 10.4-6.1 0.9-10.4 16.5-3.5 12.2-12.2 12.2-6.1 0.9-10.4 14.8-3.5 12.2-12.2 10.4-6.1-0.9-10.4 12.2-3.5 10.4-12.2 7.8-6.1-1.7-10.4 10.4-3.5 10.4-12.2 6.1-6.1-1.7-10.4 7.8-3.5 8.7-12.2 4.3-6.1-2.6-10.4 6.1-3.5 7.8-12.2 2.6-6.1-3.5-10.4 4.3-3.5 6.1-12.2 1.7-5.2-4.3-10.4 3.5-3.5 6.1-12.2 0.9-6.1-4.3-10.4 0.9-4.3 3.5-12.2-1.7-3.5-3.5-10.4 0.9-6.1 5.2-7.8-0.9-6.1-4.3-9.6 0.9-6.1 6.1-10.4-1.7-4.3-5.2-12.2-0.9-5.2 4.3-10.4-2.6-6.1-5.2-9.6 1.7-4.3 6.1-12.2-0.9-6.1-4.3-10.4 3.5-3.5 6.1-12.2 1.7-5.2-4.3-10.4 5.2-4.3 7.8-12.2 2.6-6.1-3.5-10.4 7.8-3.5 8.7-12.2 4.3-6.1-2.6-10.4 10.4-3.5 10.4-12.2 6.1-6.1-1.7-10.4 12.2-3.5 12.2-12.2 7.8-6.1-0.9-10.4 14.8-3.5 12.2-12.2 10.4-6.1 0.9-10.4 16.5-3.5 12.2-12.2 12.2-6.1 0.9-10.4 14.8-3.5 12.2-12.2 10.4-6.1-0.9-10.4 12.2-3.5 10.4-12.2 7.8-6.1-1.7-10.4 10.4-3.5 10.4-12.2 6.1-6.1-1.7-10.4 7.8-3.5 8.7-12.2 4.3-6.1-2.6-10.4 6.1-3.5 7.8-12.2 2.6-6.1-3.5-10.4 4.3-3.5 6.1-12.2 1.7-5.2-4.3-10.4 3.5-3.5 6.1-12.2 0.9-6.1-4.3-10.4 0.9-4.3 3.5-12.2-1.7-3.5-3.5-10.4 0.9-6.1 5.2-7.8-0.9-6.1-4.3-9.6 0.9-6.1 6.1-10.4-1.7-4.3-5.2-12.2-0.9-5.2 4.3-10.4-2.6-6.1-5.2-9.6 1.7-4.3 6.1-12.2-0.9-6.1-4.3-10.4 3.5-3.5 6.1-12.2 1.7-5.2-4.3-10.4 5.2-4 />

  <!-- SIX TRUE-BORDER OBLASTS -->
  <path id="lviv" class="oblast" d="PASTE_LVIV_PATH_HERE" />
  <path id="kyiv" class="oblast" d="PASTE_KYIV_OBLAST_PATH_HERE" />
  <path id="odesa" class="oblast" d="PASTE_ODESA_PATH_HERE" />
  <path id="mykolaiv" class="oblast" d="PASTE_MYKOLAIV_PATH_HERE" />
  <path id="kharkiv" class="oblast" d="PASTE_KHARKIV_PATH_HERE" />
  <path id="zaporizhzhia" class="oblast" d="PASTE_ZAPORIZHZHIA_PATH_HERE" />

  <!-- WEATHER + ALERT LABEL -->
  <text id="weatherText" class="weather-label" x="0" y="0">Loading...</text>

</svg>

<script>
/* -------------------------------------------
   CONFIG
-------------------------------------------- */

const oblasts = [
  { id: "lviv", city: "Lviv" },
  { id: "kyiv", city: "Kyiv" },
  { id: "odesa", city: "Odesa" },
  { id: "mykolaiv", city: "Mykolaiv" },
  { id: "kharkiv", city: "Kharkiv" },
  { id: "zaporizhzhia", city: "Zaporizhzhia" }
];

const API_KEY = "YOUR_OPENWEATHER_API_KEY";

/* Weather emoji mapping */
const weatherEmoji = {
  Thunderstorm: "â›ˆï¸",
  Drizzle: "ğŸŒ¦ï¸",
  Rain: "ğŸŒ§ï¸",
  Snow: "â„ï¸",
  Clear: "â˜€ï¸",
  Clouds: "â˜ï¸",
  Mist: "ğŸŒ«ï¸",
  Smoke: "ğŸŒ«ï¸",
  Haze: "ğŸŒ«ï¸",
  Dust: "ğŸŒ«ï¸",
  Fog: "ğŸŒ«ï¸",
  Sand: "ğŸŒ«ï¸",
  Ash: "ğŸŒ«ï¸",
  Squall: "ğŸ’¨",
  Tornado: "ğŸŒªï¸"
};

/* Air alert emoji mapping */
function alertEmoji(active) {
  return active ? "ğŸ”´" : "ğŸŸ¢";
}

/* -------------------------------------------
   WEATHER FETCH
-------------------------------------------- */

async function fetchWeather(city) {
  try {
    const url =
      `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${API_KEY}`;
    const res = await fetch(url);
    const data = await res.json();

    const temp = Math.round(data.main.temp);
    const cond = data.weather[0].main;
    const emoji = weatherEmoji[cond] || "ğŸŒ¡ï¸";

    return `${emoji} ${temp}Â°C`;
  } catch (e) {
    return "âš ï¸ N/A";
  }
}

/* -------------------------------------------
   AIR ALERT FETCH (UA API)
-------------------------------------------- */

async function fetchAlert(city) {
  try {
    // Example placeholder â€” replace with your real alert API
    const active = Math.random() < 0.3; // 30% chance for demo
    return alertEmoji(active);
  } catch (e) {
    return "âš ï¸";
  }
}

/* -------------------------------------------
   ROTATION + AUTOSCALE LABEL
-------------------------------------------- */

let index = 0;
const weatherText = document.getElementById("weatherText");

async function rotate() {
  // Remove active from all
  oblasts.forEach(o => {
    document.getElementById(o.id).classList.remove("active");
  });

  // Activate current oblast
  const current = oblasts[index];
  const el = document.getElementById(current.id);
  el.classList.add("active");

  // Fetch weather + alert
  const weather = await fetchWeather(current.city);
  const alert = await fetchAlert(current.city);

  const label = `${current.city} ${weather} ${alert}`;

  // Position label at centroid
  const bbox = el.getBBox();
  const cx = bbox.x + bbox.width / 2;
  const cy = bbox.y + bbox.height / 2;

  // Autoscale text based on oblast size
  const area = bbox.width * bbox.height;
  let fontSize = Math.sqrt(area) * 0.04; // adaptive scaling
  fontSize = Math.max(14, Math.min(fontSize, 32)); // clamp

  weatherText.setAttribute("x", cx);
  weatherText.setAttribute("y", cy);
  weatherText.setAttribute("font-size", fontSize);
  weatherText.textContent = label;

  // Next oblast
  index = (index + 1) % oblasts.length;
}

// Start rotation
rotate();
setInterval(rotate, 5000);
</script>

</body>
</html>
