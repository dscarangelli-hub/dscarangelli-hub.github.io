---
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Newsletter – WSUA</title>

  <link rel="stylesheet" href="/assets/css/style.css" />
  <link rel="stylesheet" href="/assets/css/components.css" />
  <link rel="icon" type="image/svg+xml" href="/assets/images/emblem.svg" />
</head>

<body>

<div class="watermark"></div>
<div class="vignette"></div>

{% include navbar.html %}

<section class="hero small-hero fade-in">
  <div class="hero-bg" style="background-image:url('/assets/images/newsletter/newsletter-hero.jpg');"></div>
  <div class="hero-overlay"></div>
  <div class="hero-text-wrapper">
    <h1 class="hero-title">WSUA Newsletter</h1>
    <p class="hero-subtitle">Monthly updates, stories, and insights.</p>
  </div>
</section>

<main class="content fade-in">

  <section class="content-section">
    <h2>Newsletter Archive</h2>
    <p>
      Upload any newsletter PDF to <code>/assets/docs/newsletters/</code> and it will appear here automatically.
    </p>

    <ul id="newsletter-list" class="document-list"></ul>
  </section>

</main>

{% include footer.html %}

<script>
  async function loadNewsletters() {
    const repoOwner = "dscarangelli-hub";
    const repoName = "dscarangelli-hub.github.io";
    const folderPath = "assets/docs/newsletters";

    const apiUrl = `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${folderPath}`;
    const response = await fetch(apiUrl);
    const files = await response.json();

    const container = document.getElementById("newsletter-list");

    const iconMap = {
      "pdf": "/assets/icons/pdf-wsua-large.svg",
      "doc": "/assets/icons/docx-wsua-large.svg",
      "docx": "/assets/icons/docx-wsua-large.svg",
      "txt": "/assets/icons/file-wsua-large.svg"
    };

    const prettyName = (filename) => {
      return filename
        .replace(/[-_]/g, " ")
        .replace(/\.[^/.]+$/, "")
        .replace(/\b\w/g, c => c.toUpperCase());
    };

    const formatSize = (bytes) => {
      if (bytes < 1024) return bytes + " B";
      if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + " KB";
      return (bytes / (1024 * 1024)).toFixed(1) + " MB";
    };

    const sorted = files
      .filter(f => f.type === "file")
      .sort((a, b) => b.name.localeCompare(a.name));

    sorted.forEach(file => {
      const ext = file.name.split(".").pop().toLowerCase();
      const icon = iconMap[ext] || "/assets/icons/file-wsua-large.svg";

      const title = prettyName(file.name);
      const size = formatSize(file.size);

      const item = document.createElement("li");
      item.className = "document";

      item.innerHTML = `
        <img src="${icon}" class="doc-icon" alt="File icon">
        <div class="doc-info">
          <a href="/assets/docs/newsletters/${file.name}" class="doc-title">${title}</a>
          <p class="doc-meta">${ext.toUpperCase()} • ${size}</p>
        </div>
      `;

      container.appendChild(item);
    });
  }

  loadNewsletters();
</script>

</body>
</html>

